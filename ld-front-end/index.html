<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body class="bg-light">
	<header class="shadow">
		<button class="btn btn-warning btn-sm" onclick="setSession()">Set Session</button>
	</header>
	<section class="shadow">
		<div>
			<h1 class="mb-4">Login</h1>
			<input id="email" type="email" name="email" placeholder="enter email" class="form-control"><br>
			<input id="password" type="password" name="password" placeholder="enter password" class="form-control"><br>
			<button onclick="login()" class="btn btn-info">Login</button>
		</div>

		<div>
			<h1 class="mb-4">Register</h1>
			<input id="email1" type="email" name="email" placeholder="email" class="m-2"><br>
			<input id="fullname1" type="fullname" name="fullname" placeholder="fullname" class="form-control m-2"><br>
			<input id="user_name1" type="user_name" name="user_name" placeholder="user_name" class="form-control m-2"><br>
			<input id="password1" type="password" name="password" placeholder="password" class="form-control m-2"><br>
			<button onclick="register()" class="m-2 btn btn-info">Register</button>
		</div>

		<div>
			<h1 class="mb-4">Reset Password</h1>
			<input id="email2" type="email" name="email" placeholder="enter email" class="form-control">
			<button onclick="resetPassword()" class="mt-2 btn btn-info">Send request</button>
		</div>
		<div>
			<h1 class="mb-4">Update profile</h1>
			<input id="email3" type="email" name="email" placeholder="email" class="m-2"><br>
			<input id="fullname3" type="fullname" name="fullname" placeholder="fullname" class="form-control m-2"><br>
			<input id="user_name3" type="user_name" name="user_name" placeholder="user_name" class="form-control m-2"><br>
			<!-- <input id="password3" type="password" name="password" placeholder="password" class="form-control m-2"><br> -->
			<button onclick="updateProfile()" class="m-2 btn btn-info">Update profile</button>
		</div>
		<div>
			<h1 class="mb-4">Delete account</h1>
			<input id="password4" type="password" name="password" placeholder="enter password" class="form-control">
			<button onclick="deleteAccount()" class="mt-2 btn btn-info">Delete account</button>
		</div>
	</section>
</body>
<script>
	async function login(){
		const data = {
			email    : document.querySelector('#email').value,
			password : document.querySelector('#password').value
		}
		 const response = await fetch("http://localhost:8000/auth/login", {
		    method: 'POST', // *GET, POST, PUT, DELETE, etc.
		    // mode: 'cors', // no-cors, *cors, same-origin
		    headers: {
		      'Content-Type': 'application/json'
		      // 'Content-Type': 'application/x-www-form-urlencoded',
		    },
		    body: JSON.stringify(data) // body data type must match "Content-Type" header
		  });
		  console.log(response.json()); // parses JSON response into native JavaScript objects
	}
	async function register(){
		const data = {
			email    : document.querySelector('#email1').value,
			fullname    : document.querySelector('#fullname1').value,
			user_name    : document.querySelector('#user_name1').value,
			password : document.querySelector('#password1').value
		}
		console.log(data)
		 const response = await fetch("http://localhost:8000/auth/register", {
		    method: 'POST', // *GET, POST, PUT, DELETE, etc.
		    // mode: 'cors', // no-cors, *cors, same-origin
		    headers: {
		      'Content-Type': 'application/json'
		      // 'Content-Type': 'application/x-www-form-urlencoded',
		    },
		    body: JSON.stringify(data) // body data type must match "Content-Type" header
		  });
		  console.log(response.json()); // parses JSON response into native JavaScript objects
	}
	async function resetPassword(){
		const data = {
			email    : document.querySelector('#email2').value,
		}
		 const response = await fetch("http://localhost:8000/auth/resetPassword", {
		    method: 'POST', // *GET, POST, PUT, DELETE, etc.
		    // mode: 'cors', // no-cors, *cors, same-origin
		    headers: {
		      'Content-Type': 'application/json'
		      // 'Content-Type': 'application/x-www-form-urlencoded',
		    },
		    body: JSON.stringify(data) // body data type must match "Content-Type" header
		  });
		  console.log(response.json()); // parses JSON response into native JavaScript objects
	}
	// Needs to be authenticated
	async function updateProfile(){
		const data = {
			email    : document.querySelector('#email3').value,
			fullname    : document.querySelector('#fullname3').value,
			user_name    : document.querySelector('#user_name3').value,
			password : document.querySelector('#password3').value
		}
		 const response = await fetch("http://localhost:8000/auth/updateUser", {
		    method: 'PUT', // *GET, POST, PUT, DELETE, etc.
		    // mode: 'cors', // no-cors, *cors, same-origin
		    headers: {
		      'Content-Type': 'application/json'
		      // 'Content-Type': 'application/x-www-form-urlencoded',
		    },
		    body: JSON.stringify(data) // body data type must match "Content-Type" header
		  });
		  console.log(response.json()); // parses JSON response into native JavaScript objects
	}
	// Needs to be authenticated
	async function deleteAccount(){
		const data = {
			password : document.querySelector('#password4').value
		}
		 const response = await fetch("http://localhost:8000/auth/deleteUser", {
		    method: 'DELETE', // *GET, POST, PUT, DELETE, etc.
		    // mode: 'cors', // no-cors, *cors, same-origin
		    headers: {
		      'Content-Type': 'application/json'
		      // 'Content-Type': 'application/x-www-form-urlencoded',
		    },
		    body: JSON.stringify(data) // body data type must match "Content-Type" header
		  });
		  console.log(response.json()); // parses JSON response into native JavaScript objects
	}
	async function setSession(){
		const res = await fetch('http://localhost:8000/auth/save_session',{
			mathod:     "GET",
		})
		const data = res.json();
		console.log(data);
	}
</script>
</html>
<style>
	header {
		background-color: white;
		width: 100%;
		height: 70px;
		margin: 0 0 30px 0;
	}
	section {
		padding: 20px; 
		margin: 0 auto; 
		background-color: white;
		width: 30%;
	}
</style>